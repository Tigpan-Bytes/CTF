<html>

<head>
    <meta charset="UTF-8">

	<title> Literal Reversal </title>
</head>
<body>
    <input type="text" placeholder="Try to find the flag..." id="input">
    <button type="button" onclick="checkValue();">Attempt</button>

    <script>
        function checkValue()
        {
            let input = document.getElementById("input").value;
            let changed = changeB(reverseVal(changeA(input)));
            
            if (changed == 'pbgsutzggogu')
            {
                alert('Correct the flag is ' + input);
            }
            else
            {
                alert('Incorrect');
            }
            console.log(String(changeA))
        }

        function changeA(val)
        {
            changes = [-1,3,1,0,-2,4,3,2,-3,-2,1,2];
            newVal = '';
            for (let i = 0; i < 12; i++)
            {
                newVal += String.fromCharCode(val.charCodeAt(i) + changes[i]);
            } 
            return newVal;
        }

        function changeB(val)
        {
            changes = [-4,1,2,-1,1,3,2,-2,0,2,-2,-1];
            newVal = '';
            for (let i = 0; i < 12; i++)
            {
                newVal += String.fromCharCode(val.charCodeAt(i) + changes[i]);
            }
            return newVal;
        }

        function reverseVal(val)
        {                               //hard to read? sucks for you...
            return reverseSection(reverseSection(reverseSection(reverseSection(reverseSection(reverseSection(val, 7, 5), 4, 3), 7, 2), 0, 8), 5, 1), 3, 3);
        }

        function reverseSection(val, i, len)
        {
            valList = val.split("");
            s = valList.slice(0, i).join("");
            m = valList.slice(i, i + len).reverse().join("");
            e = valList.slice(i + len, 12).join("");
            return s + m + e;
        }
    </script>
</body>

</html>